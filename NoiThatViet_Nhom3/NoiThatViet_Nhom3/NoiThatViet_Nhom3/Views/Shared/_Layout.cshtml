<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - My ASP.NET Application</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="~/Content/StyleForLayout.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />
    <style>

        .menu-item-text {
            color: #000000;
            text-decoration: none;
        }

        .no-underline {
            text-decoration: none;
        }
    </style>
</head>
<body>
    <script src="~/Content/XuLyGoiYSanPham.js"></script>
    @{ var user = Session["TaiKhoan"] as NoiThatViet_Nhom3.Models.TaiKhoan;}
    @{ var userFB = Session["TaiKhoanFB"] as NoiThatViet_Nhom3.Models.ThongTinCaNhan;}

    <nav>
        <ul class="menu">
            <li class="menu-item"><a href="/" class="logo-link"><img src="~/Content/images/logo.jpg" alt="Logo"></a></li>
            <li class="menu-item-text">
                <i class="bi bi-list"></i>
                @NoiThatViet_Nhom3.Resources.Messages.Featured_Categorie
            </li>
            <li class="menu-item-text">
                @Html.Action("menu", "SanPham")
            </li>
            <li class="menu-item-text">
                @Html.Action("Phong", "SanPham")
            </li>
            <li class="menu-item-text">
                @Html.Action("DichVu", "SanPham")
            </li>
            <li class="menu-item-text">
                <a>@NoiThatViet_Nhom3.Resources.Messages.Contact</a>
                <ul>
                    <li><a href="#">Gmail</a></li>
                    <li><a href="#">Số điện thoại</a></li>
                    <li><a href="#">Địa chỉ</a></li>
                </ul>
            </li>
            <li class="menu-item-text">
                <form action="/SanPham/Search" method="get" class="form-inline my-2 my-lg-0">
                    <div class="search-container">
                        <input class="form-control mr-sm-2 search-input"
                               type="text"
                               name="searchString"
                               placeholder="  @NoiThatViet_Nhom3.Resources.Messages.Find_products">
                        <button type="submit" class="search-button">
                            <i class="fa fa-search"></i>
                        </button>
                        <ul class="search-suggestions"></ul>
                    </div>
                </form>
            </li>
            <li class="menu-item-text">
                <a href="@Url.Action("Index", "Cart", new { userId = Session["UserId"] })">
                    <i class="bi bi-handbag"></i>
                    <span class="icon-text"></span>
            </li>


            <li class="menu-item-text">
                <a href="@Url.Action("Wishlist", "SanPham", new { userId = Session["UserId"] })">
                    <i class="bi bi-heart"></i>
                </a>
                @if (ViewBag.WishlistCount > 0)
                {
                    <span class="badge badge-warning wishlist-count">@ViewBag.WishlistCount</span>
                }
            </li>
            <li class="menu-item-text">
                <a href="#">@NoiThatViet_Nhom3.Resources.Messages.Language</a>
                <ul>
                    <li><a href="@Url.Action("ChangeLanguage", "Language", new { selectedLanguage = "en" })">English</a></li>
                    <li><a href="@Url.Action("ChangeLanguage", "Language", new { selectedLanguage = "vi" })">Tiếng Việt</a></li>
                </ul>
            </li>
            @{
                var isLoggedIn = (user != null) || (userFB != null);
            }
            @{ if (!isLoggedIn)
                {
                        <li class="menu-item-text">
                            @Html.Raw("<i class='bi bi-person'></i>") @Html.ActionLink(@NoiThatViet_Nhom3.Resources.Messages.Login, "DangNhap", "Home", null, new { @class = "menu-item-text" })
                        </li>
                }
                else
                {
                    <li class="menu-item-text" id="dropdownMenu">
                        <a href="#" class="no-underline" id="navbarDropdown" onmouseover="showDropdownMenu()">
                            @(user != null ? user.ThongTinCaNhan.HoTen : userFB.HoTen)
                        </a>
                        <div class="dropdown-content" id="dropdownContent">
                            <a href="@Url.Action("ThongTinTK", "Home")">Thông tin tài khoản</a>
                            <a href="@Url.Action("DonMua", "DonHang")">Đơn mua</a>
                            <a href="#" onclick="confirmLogout()">Đăng xuất</a>
                            <form id="logoutForm" action="@Url.Action("DangXuat", "Home")" method="post" style="display: none;">
                                @Html.AntiForgeryToken()
                            </form>

                        </div>
                    </li>
                }
            }
        </ul>
    </nav>
    <div class="container-fluid">
        @RenderBody()
    </div>

    <footer class="footer spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__about__logo">
                            <a href="/" class="logo-link"><img src="~/Content/images/logo.jpg" alt="Logo"></a>
                        </div>
                        <ul>
                            <li>Địa chỉ: 838 Nguyễn Kiệm,<br>Phường 3, Gò Vấp, Tp.HCM</li>
                            <li>SĐT: 0368285760</li>
                            <li>Email: nghia812014@gmail.com</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 offset-lg-1">
                    <div class="footer__widget">
                        <h6>Liên kết hữu ích</h6>
                        <ul>
                            <li><a href="#">Chính sách bán hàng</a></li>
                            <li><a href="#">Chính sách giao hàng & lắp đặt</a></li>
                            <li><a href="#">Chính sách đổi trả</a></li>
                            <li><a href="#">Chính sách bảo hành & bảo trì</a></li>
                            <li><a href="#">Khách hàng thân thiết - MOHOmie</a></li>
                            <li><a href="#">Khuyến mãi</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12">
                    <div class="footer__widget">
                        <h6>Tham gia với chúng tôi ngay bây giờ</h6>
                        <p>Nhận thông tin mới nhất của cửa hàng cập nhật qua Email</p>
                        <form action="#">
                            <input type="text" placeholder="Nhập Email tại đây">
                            <button type="submit" class="site-btn">Đăng ký ngay</button>
                        </form>
                        <div class="footer__widget__social">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-instagram"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-pinterest"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script>
        function confirmLogout() {
            if (confirm("Bạn có muốn đăng xuất không?")) {
                document.getElementById('logoutForm').submit();
            }
        }

    </script>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)


</body>
</html>